version: "3.3"

services:
  jaeger:
    image: jaegertracing/all-in-one:1.18
    ports:
     - "16686:16686/tcp"
     - "5775:5775/udp"
     - "5778:5778/tcp"
     - "6831:6831/udp"
     - "6832:6832/udp"
    restart: always
    environment:
     - SPAN_STORAGE_TYPE=cassandra
     - CASSANDRA_SERVERS=192.168.3.254
     - CASSANDRA_PORT=9042
     - CASSANDRA_KEYSPACE=log
     - CASSANDRA_USERNAME=cassandra
     - CASSANDRA_PASSWORD=cassandra
    deploy:
      replicas: 1
      resources:
        limits:
          cpus: "0.5"
          memory: 400M	
      restart_policy:
        condition: on-failure
