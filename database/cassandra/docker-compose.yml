version: "3.8"
services:
  cassandra:
    image: cassandra:3.11.4
    ports:
    - 7000:7000
    - 7001:7001
    - 7199:7199
    - 9042:9042
    - 9160:9160
    deploy:
      replicas: 1
      resources:
        limits:
          cpus: "0.5"
          memory: 10000M
      restart_policy:
        condition: on-failure

  cassandra-web:
    image: metavige/cassandra-web
    environment:
      CASSANDRA_HOST: ${HOST:-10.148.0.9}
      CASSANDRA_USER: cassandra
      CASSANDRA_PASSWORD: cassandra
    restart: always
    ports:
     - 3042:3000
    deploy:
      replicas: 1
      resources:
        limits:
          cpus: "0.5"
          memory: 1000M
      restart_policy:
        condition: on-failure
